<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Top Student - University Application (Step 3)</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon.png">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-white text-gray-800">

  <!-- Header -->
  <header class="bg-gray-700 shadow mb-6">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <span class="text-lg font-bold text-white">Top Student</span>
      </div>
      <nav class="flex gap-6 text-base text-white">
        <a href="https://www.google.com/search?q=south+african+universities" target="_blank" class="group transition-transform duration-200">
          <span class="group-hover:hidden font-semibold">Ex</span>
          <span class="hidden group-hover:inline-block font-medium text-blue-700 transition-all duration-500 ease-in">Explore Universities</span>
        </a>
        <a href="https://www.google.com/search?q=university+application+tips+south+africa" target="_blank" class="group transition-transform duration-200">
          <span class="group-hover:hidden font-semibold">App</span>
          <span class="hidden group-hover:inline-block font-medium text-blue-700 transition-all duration-500 ease-in">Application Tips</span>
        </a>
        <a href="https://www.google.com/search?q=south+africa+university+courses" target="_blank" class="group transition-transform duration-200">
          <span class="group-hover:hidden font-semibold">Co</span>
          <span class="hidden group-hover:inline-block font-medium text-blue-700 transition-all duration-500 ease-in">Courses & Info</span>
        </a>
      </nav>
    </div>
  </header>

  <!-- Step Tracker -->
  <div class="max-w-4xl mx-auto p-6 text-center">
    <h1 class="text-3xl font-bold text-yellow-500 mb-2">Agree to the Terms</h1>
    <p class="text-sm text-gray-600 mb-10">Step 3 of 5 – Confirm you understand the responsibilities and consent to continue.</p>

    <div class="flex flex-wrap justify-center gap-6 mb-12">
      <div class="flex flex-col items-center">
        <div class="w-20 h-20 flex items-center justify-center rounded-full bg-blue-500 text-white font-bold text-xl">Step<br/>1</div>
        <span class="mt-2 text-sm font-medium text-gray-600">How to Apply</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="w-20 h-20 flex items-center justify-center rounded-full bg-green-500 text-white font-bold text-xl">Step<br/>2</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Choose University</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="w-20 h-20 flex items-center justify-center rounded-full bg-yellow-500 text-white font-bold text-xl">Step<br/>3</div>
        <span class="mt-2 text-sm font-medium text-yellow-500">Agree to Terms</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="w-20 h-20 flex items-center justify-center rounded-full bg-purple-500 text-white font-bold text-xl">Step<br/>4</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Personal Info</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="w-20 h-20 flex items-center justify-center rounded-full bg-red-500 text-white font-bold text-xl">Step<br/>5</div>
        <span class="mt-2 text-sm font-medium text-gray-600">What’s Next</span>
      </div>
    </div>
  </div>

  <!-- Terms & Conditions Section -->
  <section class="max-w-3xl mx-auto bg-white shadow-md p-6 rounded-xl border border-yellow-300 text-sm text-gray-800">
    <h2 class="text-lg font-semibold text-yellow-600 mb-4 text-center">Top Student Terms & Conditions</h2>
    
    <div class="space-y-4">
<p><strong>Effective Date:</strong> July 2025</p>

  <p>By using this service ("Top Student University Application Assistant"), you agree to the following legally binding terms:</p>

  <h3 class="text-yellow-600 font-semibold">1. Our Role</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>Top Student is a private academic support platform that collects your university application details and submits them on your behalf to public South African universities.</li>
    <li>We are not affiliated with or officially endorsed by any university, government institution, or educational body.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">2. Permission to Act</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>By agreeing to these terms, you give Top Student full permission to use the information you provide to complete and submit university applications in your name.</li>
    <li>You acknowledge that you are requesting this service voluntarily and understand the scope of our role.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">3. User Responsibility</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>You agree to provide accurate, truthful, and complete information during this process.</li>
    <li>You are responsible for uploading certified documents when requested, responding to university emails, and completing any follow-up actions required after submission.</li>
    <li>Top Student is not responsible for delays or rejections caused by incorrect information or late responses from your side.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">4. No Guarantees</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>We do not and cannot guarantee admission into any university or course.</li>
    <li>Decisions about acceptance are made solely by the universities.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">5. Application Scope</h3>
  <ul class="list-disc list-inside space-y-2">
  <li>Top Student will apply to a maximum of 3 public universities on your behalf, based on the information and course choices you provide.</li>
  <li>This step does not include NSFAS, bursaries, private universities, or collage.</li>
  <li>NSFAS support is offered as a separate service on another page. You must complete that step separately if you want our help with NSFAS.</li>
  <li>No exceptions will be made. This is the full scope of Step 3.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">6. Privacy & Data Use</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>Your personal data is used only to complete your university applications.</li>
    <li>We store your data securely and do not share it with third parties, unless required by law or with your consent.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">7. Intellectual Property</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>All systems, designs, content, and tools provided by Top Student are protected and may not be copied, shared, or reused without written permission.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">8. Limitation of Liability</h3>
  <ul class="list-disc list-inside space-y-2">
    <li>Top Student shall not be held liable for missed deadlines, system outages, university errors, or any loss caused by the application process.</li>
    <li>You use this service at your own risk and accept all responsibilities related to your university application.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">9. Application Fees & Communication</h3>
  <ul class="list-disc list-inside space-y-2">
<li>Top Student does not cover university application fees or any related costs by default.</li>
<li>If a university requires a payment, you will be notified either by us or directly by the institution. You can request our guidance on how to pay it correctly.</li>
<li>If additional information is needed for your application, we will contact you at 072 730 6186.</li>
<li>You may also use this number to reach us if you need to update your application or share important information.</li>
  </ul>

  <h3 class="text-yellow-600 font-semibold">10. Agreement</h3>
  <p class="text-gray-700">
    By checking the box and continuing, you agree that you’ve read, understood, and accepted these terms. You give Top Student permission to act on your behalf for university applications, and you release us from all liability related to university outcomes.
  </p>
</div>

    <!-- Consent Checkbox -->
    <div class="mt-6">
      <label class="flex items-start gap-2">
        <input type="checkbox" id="agree" class="mt-1">
        <span class="text-sm leading-relaxed text-gray-700">I have read, understood, and agree to the Terms & Conditions of Top Student and the relevant universities.</span>
      </label>
    </div>

    <!-- Navigation Buttons -->
    <div class="mt-8 flex justify-between">
      <a href="step2.html" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded">
        ← Back
      </a>
      <button id="continueBtn" disabled class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-6 rounded opacity-50 cursor-not-allowed">
        Continue →
      </button>
    </div>
  </section>

  <!-- Script to Enable Button -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabase = createClient(
    'https://mlwxxtvsozhwzjxmsvbg.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1sd3h4dHZzb3pod3pqeG1zdmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4OTAwOTksImV4cCI6MjA2NDQ2NjA5OX0.i9KySUVeot9imnALKr79DYySocuj0_rko4nzPhPxekU'
  );

  const agreeCheckbox = document.getElementById('agree')
  const continueBtn = document.getElementById('continueBtn')

  continueBtn.disabled = true // start disabled

  agreeCheckbox.addEventListener('change', () => {
    continueBtn.disabled = !agreeCheckbox.checked
    continueBtn.classList.toggle('opacity-50', !agreeCheckbox.checked)
    continueBtn.classList.toggle('cursor-not-allowed', !agreeCheckbox.checked)
  })

  continueBtn.addEventListener('click', async () => {
    if (!agreeCheckbox.checked) return

    // Get current user
    const { data: { user }, error: userError } = await supabase.auth.getUser()
    if (userError || !user) {
      alert('You must be logged in to continue.')
      return
    }

    const userId = user.id

    // Update agreed_to_terms to true for this user in university_choices
    const { data, error } = await supabase
      .from('university_choices')
      .update({ agreed_to_terms: true })
      .eq('user_id', userId)

    if (error) {
      alert('Error saving your agreement. Please try again.')
      console.error(error)
      return
    }

    // Redirect to Step 4 page
    window.location.href = 'step4.html'
  })
  </script>
</body>
</html>